{"ast":null,"code":"var _jsxFileName = \"/home/hang/Documents/ML-full-stack-app/front-end/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useRef } from \"react\";\nimport \"./App.css\";\nimport { FilesetResolver, HandLandmarker, PoseLandmarker } from \"@mediapipe/tasks-vision\";\nimport { drawConnectors, drawLandmarks, lerp } from \"@mediapipe/drawing_utils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet handLandmarker;\nlet poseLandmarker;\nlet lastVideoTime = -1;\nlet results = {};\nlet pose_results = {};\nconst HAND_CONNECTIONS = [[0, 1], [1, 2], [2, 3], [3, 4], [0, 5], [5, 6], [6, 7], [7, 8], [0, 9], [9, 10], [10, 11], [11, 12], [0, 13], [13, 14], [14, 15], [15, 16], [0, 17], [17, 18], [18, 19], [19, 20]];\nconst POSE_CONNECTIONS = [[11, 12], [11, 13], [11, 23], [12, 14], [12, 24], [13, 15], [14, 16], [15, 17], [16, 18], [17, 19], [18, 20], [19, 21], [20, 22], [23, 25], [23, 24], [25, 27], [26, 28], [27, 29], [28, 30], [29, 31], [30, 32], [31, 32]];\nfunction App() {\n  _s();\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  ///function to initialize webcam \n  const initializeWebcam = async () => {\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    if (video && canvas) {\n      const canvasCtx = canvas.getContext(\"2d\");\n      const setup = async () => {\n        const vision = await FilesetResolver.forVisionTasks(\"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm\");\n        handLandmarker = await HandLandmarker.createFromOptions(vision, {\n          baseOptions: {\n            modelAssetPath: `https://storage.googleapis.com/mediapipe-models/hand_landmarker/hand_landmarker/float16/1/hand_landmarker.task`,\n            delegate: \"GPU\"\n          },\n          numHands: 4,\n          runningMode: \"VIDEO\"\n        });\n        poseLandmarker = await PoseLandmarker.createFromOptions(vision, {\n          baseOptions: {\n            modelAssetPath: \"https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_lite/float16/1/pose_landmarker_lite.task\"\n          },\n          runningMode: \"VIDEO\"\n        });\n        navigator.mediaDevices.getUserMedia({\n          video: {\n            width: 1280,\n            height: 720\n          }\n        }).then(stream => {\n          video.srcObject = stream;\n          video.addEventListener(\"loadeddata\", predict);\n        });\n      };\n      const predict = () => {\n        if (canvasCtx) {\n          canvas.width = video.videoWidth;\n          canvas.height = video.videoHeight;\n          const nowInMs = performance.now();\n          if (lastVideoTime !== video.currentTime) {\n            lastVideoTime = video.currentTime;\n            results = handLandmarker.detectForVideo(video, nowInMs);\n            pose_results = poseLandmarker.detectForVideo(video, nowInMs);\n            console.log(results);\n            console.log(pose_results);\n          }\n          canvasCtx === null || canvasCtx === void 0 ? void 0 : canvasCtx.save();\n          canvasCtx === null || canvasCtx === void 0 ? void 0 : canvasCtx.clearRect(0, 0, canvas.width, canvas.height);\n          if (results.landmarks) {\n            for (const landmarks of results.landmarks) {\n              drawConnectors(canvasCtx, landmarks, HAND_CONNECTIONS, {\n                color: \"#00FF00\",\n                lineWidth: 5\n              });\n              drawLandmarks(canvasCtx, landmarks, {\n                color: \"#FF0000\",\n                lineWidth: 2\n              });\n            }\n          }\n          if (pose_results.landmarks) {\n            for (const landmarks of pose_results.landmarks) {\n              drawLandmarks(canvasCtx, landmarks, {\n                radius: data => {\n                  // Handle potential undefined values\n                  const zValue = data.from && data.from.z ? data.from.z : 0;\n                  return lerp(zValue, -0.15, 0.1, 5, 1);\n                }\n              });\n              drawConnectors(canvasCtx, landmarks, POSE_CONNECTIONS);\n            }\n          }\n          canvasCtx.restore();\n          requestAnimationFrame(predict);\n        }\n      };\n      setup();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      autoPlay: true,\n      playsInline: true,\n      ref: videoRef,\n      id: \"video\",\n      style: {\n        position: \"absolute\",\n        left: 0,\n        top: 0,\n        textAlign: \"center\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      id: \"canvas_output\",\n      style: {\n        position: \"absolute\",\n        left: 0,\n        top: 0,\n        textAlign: \"center\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: initializeWebcam,\n      children: \"Enable Webcam\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"t4CmKfOhyNE8v6mwzIg9jqBR93A=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useRef","FilesetResolver","HandLandmarker","PoseLandmarker","drawConnectors","drawLandmarks","lerp","jsxDEV","_jsxDEV","handLandmarker","poseLandmarker","lastVideoTime","results","pose_results","HAND_CONNECTIONS","POSE_CONNECTIONS","App","_s","videoRef","canvasRef","initializeWebcam","video","current","canvas","canvasCtx","getContext","setup","vision","forVisionTasks","createFromOptions","baseOptions","modelAssetPath","delegate","numHands","runningMode","navigator","mediaDevices","getUserMedia","width","height","then","stream","srcObject","addEventListener","predict","videoWidth","videoHeight","nowInMs","performance","now","currentTime","detectForVideo","console","log","save","clearRect","landmarks","color","lineWidth","radius","data","zValue","from","z","restore","requestAnimationFrame","className","children","autoPlay","playsInline","ref","id","style","position","left","top","textAlign","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["/home/hang/Documents/ML-full-stack-app/front-end/src/App.tsx"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport \"./App.css\";\nimport {\n  FilesetResolver,\n  HandLandmarker,\n  PoseLandmarker\n} from \"@mediapipe/tasks-vision\";\nimport {\n  drawConnectors,\n  drawLandmarks,\n  lerp\n} from \"@mediapipe/drawing_utils\";\n\nlet handLandmarker: HandLandmarker;\nlet poseLandmarker: PoseLandmarker;\nlet lastVideoTime = -1;\nlet results: { landmarks?: any[] } = {};\nlet pose_results: { landmarks?: any[] } = {};\n\nconst HAND_CONNECTIONS: [number, number][] = [\n  [0, 1],\n  [1, 2],\n  [2, 3],\n  [3, 4],\n  [0, 5],\n  [5, 6],\n  [6, 7],\n  [7, 8],\n  [0, 9],\n  [9, 10],\n  [10, 11],\n  [11, 12],\n  [0, 13],\n  [13, 14],\n  [14, 15],\n  [15, 16],\n  [0, 17],\n  [17, 18],\n  [18, 19],\n  [19, 20],\n];\n\nconst POSE_CONNECTIONS: [number, number][] = [\n  [11, 12], [11, 13], [11, 23], [12, 14], [12, 24], \n  [13, 15], [14, 16], [15, 17], [16, 18], [17, 19],\n  [18, 20], [19, 21], [20, 22], [23, 25], [23, 24],\n  [25, 27], [26, 28], [27, 29], [28, 30], [29, 31],\n  [30, 32], [31, 32]\n];\n\n\nfunction App() {\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  ///function to initialize webcam \n  const initializeWebcam =async () => {\n\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    if (video && canvas) {\n      const canvasCtx = canvas.getContext(\"2d\");\n      const setup = async () => {\n        const vision = await FilesetResolver.forVisionTasks(\n          \"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm\"\n        );\n        handLandmarker = await HandLandmarker.createFromOptions(vision, {\n          baseOptions: {\n            modelAssetPath: `https://storage.googleapis.com/mediapipe-models/hand_landmarker/hand_landmarker/float16/1/hand_landmarker.task`,\n            delegate: \"GPU\",\n          },\n          numHands: 4,\n          runningMode: \"VIDEO\",\n        });\n\n        poseLandmarker = await PoseLandmarker.createFromOptions(\n          vision,\n          {\n            baseOptions: {\n              modelAssetPath: \"https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_lite/float16/1/pose_landmarker_lite.task\"\n            },\n            runningMode: \"VIDEO\"\n          });\n        \n        navigator.mediaDevices\n          .getUserMedia({\n            video: { width: 1280, height: 720 },\n          })\n          .then((stream) => {\n            video.srcObject = stream;\n            video.addEventListener(\"loadeddata\", predict);\n          });\n      };\n      const predict = () => {\n        if (canvasCtx) {\n          canvas.width = video.videoWidth;\n          canvas.height = video.videoHeight;\n          const nowInMs = performance.now();\n          if (lastVideoTime !== video.currentTime) {\n            lastVideoTime = video.currentTime;\n            results = handLandmarker.detectForVideo(video, nowInMs);\n            pose_results = poseLandmarker.detectForVideo(video,nowInMs);\n            console.log(results);\n            console.log(pose_results);\n          }\n          canvasCtx?.save();\n          canvasCtx?.clearRect(0, 0, canvas.width, canvas.height);\n        \n          if (results.landmarks) {\n            for (const landmarks of results.landmarks) {\n              drawConnectors(canvasCtx, landmarks, HAND_CONNECTIONS, {\n                color: \"#00FF00\",\n                lineWidth: 5,\n              });\n              drawLandmarks(canvasCtx, landmarks, {\n                color: \"#FF0000\",\n                lineWidth: 2,\n              });\n            }\n          }\n          if (pose_results.landmarks){\n            for (const landmarks of pose_results.landmarks) {\n              drawLandmarks(canvasCtx, landmarks, {\n                radius: (data) => {\n                    // Handle potential undefined values\n                    const zValue = data.from && data.from.z ? data.from.z : 0;\n                    return lerp(zValue, -0.15, 0.1, 5, 1);\n                }\n            });\n            drawConnectors(canvasCtx, landmarks, POSE_CONNECTIONS);\n            }\n          }\n          canvasCtx.restore();\n          requestAnimationFrame(predict);\n        }\n      };\n      setup();\n    }\n  }\n\n\n  return (\n    <div className=\"App\">\n      <video\n        autoPlay\n        playsInline\n        ref={videoRef}\n        id=\"video\"\n        style={{\n          position: \"absolute\",\n          left: 0,\n          top: 0,\n          textAlign: \"center\",\n        }}\n      />\n      <canvas\n        ref={canvasRef}\n        id=\"canvas_output\"\n        style={{\n          position: \"absolute\",\n          left: 0,\n          top: 0,\n          textAlign: \"center\",\n        }}\n      />\n      <button onClick={initializeWebcam}>Enable Webcam</button>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAeC,MAAM,QAAQ,OAAO;AAChD,OAAO,WAAW;AAClB,SACEC,eAAe,EACfC,cAAc,EACdC,cAAc,QACT,yBAAyB;AAChC,SACEC,cAAc,EACdC,aAAa,EACbC,IAAI,QACC,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElC,IAAIC,cAA8B;AAClC,IAAIC,cAA8B;AAClC,IAAIC,aAAa,GAAG,CAAC,CAAC;AACtB,IAAIC,OAA8B,GAAG,CAAC,CAAC;AACvC,IAAIC,YAAmC,GAAG,CAAC,CAAC;AAE5C,MAAMC,gBAAoC,GAAG,CAC3C,CAAC,CAAC,EAAE,CAAC,CAAC,EACN,CAAC,CAAC,EAAE,CAAC,CAAC,EACN,CAAC,CAAC,EAAE,CAAC,CAAC,EACN,CAAC,CAAC,EAAE,CAAC,CAAC,EACN,CAAC,CAAC,EAAE,CAAC,CAAC,EACN,CAAC,CAAC,EAAE,CAAC,CAAC,EACN,CAAC,CAAC,EAAE,CAAC,CAAC,EACN,CAAC,CAAC,EAAE,CAAC,CAAC,EACN,CAAC,CAAC,EAAE,CAAC,CAAC,EACN,CAAC,CAAC,EAAE,EAAE,CAAC,EACP,CAAC,EAAE,EAAE,EAAE,CAAC,EACR,CAAC,EAAE,EAAE,EAAE,CAAC,EACR,CAAC,CAAC,EAAE,EAAE,CAAC,EACP,CAAC,EAAE,EAAE,EAAE,CAAC,EACR,CAAC,EAAE,EAAE,EAAE,CAAC,EACR,CAAC,EAAE,EAAE,EAAE,CAAC,EACR,CAAC,CAAC,EAAE,EAAE,CAAC,EACP,CAAC,EAAE,EAAE,EAAE,CAAC,EACR,CAAC,EAAE,EAAE,EAAE,CAAC,EACR,CAAC,EAAE,EAAE,EAAE,CAAC,CACT;AAED,MAAMC,gBAAoC,GAAG,CAC3C,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAChD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAChD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAChD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAChD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CACnB;AAGD,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAMC,QAAQ,GAAGlB,MAAM,CAAmB,IAAI,CAAC;EAC/C,MAAMmB,SAAS,GAAGnB,MAAM,CAAoB,IAAI,CAAC;;EAEjD;EACA,MAAMoB,gBAAgB,GAAE,MAAAA,CAAA,KAAY;IAElC,MAAMC,KAAK,GAAGH,QAAQ,CAACI,OAAO;IAC9B,MAAMC,MAAM,GAAGJ,SAAS,CAACG,OAAO;IAChC,IAAID,KAAK,IAAIE,MAAM,EAAE;MACnB,MAAMC,SAAS,GAAGD,MAAM,CAACE,UAAU,CAAC,IAAI,CAAC;MACzC,MAAMC,KAAK,GAAG,MAAAA,CAAA,KAAY;QACxB,MAAMC,MAAM,GAAG,MAAM1B,eAAe,CAAC2B,cAAc,CACjD,kEACF,CAAC;QACDnB,cAAc,GAAG,MAAMP,cAAc,CAAC2B,iBAAiB,CAACF,MAAM,EAAE;UAC9DG,WAAW,EAAE;YACXC,cAAc,EAAG,gHAA+G;YAChIC,QAAQ,EAAE;UACZ,CAAC;UACDC,QAAQ,EAAE,CAAC;UACXC,WAAW,EAAE;QACf,CAAC,CAAC;QAEFxB,cAAc,GAAG,MAAMP,cAAc,CAAC0B,iBAAiB,CACrDF,MAAM,EACN;UACEG,WAAW,EAAE;YACXC,cAAc,EAAE;UAClB,CAAC;UACDG,WAAW,EAAE;QACf,CAAC,CAAC;QAEJC,SAAS,CAACC,YAAY,CACnBC,YAAY,CAAC;UACZhB,KAAK,EAAE;YAAEiB,KAAK,EAAE,IAAI;YAAEC,MAAM,EAAE;UAAI;QACpC,CAAC,CAAC,CACDC,IAAI,CAAEC,MAAM,IAAK;UAChBpB,KAAK,CAACqB,SAAS,GAAGD,MAAM;UACxBpB,KAAK,CAACsB,gBAAgB,CAAC,YAAY,EAAEC,OAAO,CAAC;QAC/C,CAAC,CAAC;MACN,CAAC;MACD,MAAMA,OAAO,GAAGA,CAAA,KAAM;QACpB,IAAIpB,SAAS,EAAE;UACbD,MAAM,CAACe,KAAK,GAAGjB,KAAK,CAACwB,UAAU;UAC/BtB,MAAM,CAACgB,MAAM,GAAGlB,KAAK,CAACyB,WAAW;UACjC,MAAMC,OAAO,GAAGC,WAAW,CAACC,GAAG,CAAC,CAAC;UACjC,IAAItC,aAAa,KAAKU,KAAK,CAAC6B,WAAW,EAAE;YACvCvC,aAAa,GAAGU,KAAK,CAAC6B,WAAW;YACjCtC,OAAO,GAAGH,cAAc,CAAC0C,cAAc,CAAC9B,KAAK,EAAE0B,OAAO,CAAC;YACvDlC,YAAY,GAAGH,cAAc,CAACyC,cAAc,CAAC9B,KAAK,EAAC0B,OAAO,CAAC;YAC3DK,OAAO,CAACC,GAAG,CAACzC,OAAO,CAAC;YACpBwC,OAAO,CAACC,GAAG,CAACxC,YAAY,CAAC;UAC3B;UACAW,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAE8B,IAAI,CAAC,CAAC;UACjB9B,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAE+B,SAAS,CAAC,CAAC,EAAE,CAAC,EAAEhC,MAAM,CAACe,KAAK,EAAEf,MAAM,CAACgB,MAAM,CAAC;UAEvD,IAAI3B,OAAO,CAAC4C,SAAS,EAAE;YACrB,KAAK,MAAMA,SAAS,IAAI5C,OAAO,CAAC4C,SAAS,EAAE;cACzCpD,cAAc,CAACoB,SAAS,EAAEgC,SAAS,EAAE1C,gBAAgB,EAAE;gBACrD2C,KAAK,EAAE,SAAS;gBAChBC,SAAS,EAAE;cACb,CAAC,CAAC;cACFrD,aAAa,CAACmB,SAAS,EAAEgC,SAAS,EAAE;gBAClCC,KAAK,EAAE,SAAS;gBAChBC,SAAS,EAAE;cACb,CAAC,CAAC;YACJ;UACF;UACA,IAAI7C,YAAY,CAAC2C,SAAS,EAAC;YACzB,KAAK,MAAMA,SAAS,IAAI3C,YAAY,CAAC2C,SAAS,EAAE;cAC9CnD,aAAa,CAACmB,SAAS,EAAEgC,SAAS,EAAE;gBAClCG,MAAM,EAAGC,IAAI,IAAK;kBACd;kBACA,MAAMC,MAAM,GAAGD,IAAI,CAACE,IAAI,IAAIF,IAAI,CAACE,IAAI,CAACC,CAAC,GAAGH,IAAI,CAACE,IAAI,CAACC,CAAC,GAAG,CAAC;kBACzD,OAAOzD,IAAI,CAACuD,MAAM,EAAE,CAAC,IAAI,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBACzC;cACJ,CAAC,CAAC;cACFzD,cAAc,CAACoB,SAAS,EAAEgC,SAAS,EAAEzC,gBAAgB,CAAC;YACtD;UACF;UACAS,SAAS,CAACwC,OAAO,CAAC,CAAC;UACnBC,qBAAqB,CAACrB,OAAO,CAAC;QAChC;MACF,CAAC;MACDlB,KAAK,CAAC,CAAC;IACT;EACF,CAAC;EAGD,oBACElB,OAAA;IAAK0D,SAAS,EAAC,KAAK;IAAAC,QAAA,gBAClB3D,OAAA;MACE4D,QAAQ;MACRC,WAAW;MACXC,GAAG,EAAEpD,QAAS;MACdqD,EAAE,EAAC,OAAO;MACVC,KAAK,EAAE;QACLC,QAAQ,EAAE,UAAU;QACpBC,IAAI,EAAE,CAAC;QACPC,GAAG,EAAE,CAAC;QACNC,SAAS,EAAE;MACb;IAAE;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eACFxE,OAAA;MACE8D,GAAG,EAAEnD,SAAU;MACfoD,EAAE,EAAC,eAAe;MAClBC,KAAK,EAAE;QACLC,QAAQ,EAAE,UAAU;QACpBC,IAAI,EAAE,CAAC;QACPC,GAAG,EAAE,CAAC;QACNC,SAAS,EAAE;MACb;IAAE;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eACFxE,OAAA;MAAQyE,OAAO,EAAE7D,gBAAiB;MAAA+C,QAAA,EAAC;IAAa;MAAAU,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACtD,CAAC;AAEV;AAAC/D,EAAA,CArHQD,GAAG;AAAAkE,EAAA,GAAHlE,GAAG;AAuHZ,eAAeA,GAAG;AAAC,IAAAkE,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}